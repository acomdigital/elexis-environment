#!/usr/bin/env bash

echo "-- CLEAN ONLY -----------------------------"
echo "DROP DATABASE $RDBMS_ELEXIS_DATABASE;"
echo "DROP DATABASE $RDBMS_BOOKSTACK_DATABASE;"
echo "DROP DATABASE $RDBMS_KEYCLOAK_DATABASE;"
echo "-- CREATE MYSQL 8 -------------------------"
echo "CREATE DATABASE $RDBMS_ELEXIS_DATABASE;"
echo "CREATE USER $RDBMS_ELEXIS_USERNAME@'172.%' IDENTIFIED BY '$RDBMS_ELEXIS_PASSWORD';"
echo "GRANT ALL PRIVILEGES ON $RDBMS_ELEXIS_DATABASE.* TO '$RDBMS_ELEXIS_USERNAME'@'172.%';"

echo "CREATE DATABASE $RDBMS_BOOKSTACK_DATABASE;"
echo "CREATE USER $RDBMS_BOOKSTACK_USERNAME@'172.%' IDENTIFIED BY '$RDBMS_BOOKSTACK_PASSWORD';"
echo "GRANT ALL PRIVILEGES ON $RDBMS_BOOKSTACK_DATABASE.* TO $RDBMS_BOOKSTACK_USERNAME@'172.%';"

echo "CREATE DATABASE $RDBMS_KEYCLOAK_DATABASE CHARACTER SET utf8 COLLATE utf8_unicode_ci;"
echo "CREATE USER $RDBMS_KEYCLOAK_USERNAME@'172.%' IDENTIFIED WITH mysql_native_password BY '$RDBMS_KEYCLOAK_PASSWORD';"
echo "GRANT ALL PRIVILEGES ON $RDBMS_KEYCLOAK_DATABASE.* TO $RDBMS_KEYCLOAK_USERNAME@'172.%';"

echo "FLUSH PRIVILEGES;"